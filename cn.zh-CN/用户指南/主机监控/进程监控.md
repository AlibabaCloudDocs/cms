# 进程监控 {#concept_a31_ygc_5db .concept}

进程监控默认为您采集最近一段时间内活跃进程消耗的 CPU 使用率、内存使用率，以及进程的文件打开数。如果您添加了进程关键字，还会采集包含关键字的进程个数。

## 查看活跃进程消耗 {#section_njq_fdd_xdb .section}

-   插件会每分钟统计一次1分钟内消耗 CPU Top5 的进程，记录 Top5 进程的 CPU 使用率、内存使用率和打开文件数。

-   进程的 CPU 使用率与内存使用率， 参考 Linux top 命令。CPU 使用率为多核使用情况。

-   当前进程打开文件数，参考 Linux lsof 命令。


**说明：** 

-   如果您的进程占用了多个 CPU，会出现 CPU 使用率超过 100% 的情况。这里的采集结果为多核的总使用率。

-   如果您查询的时间范围内，Top5 的进程不固定，进程列表中会展示这段时间内全部进入过 Top5 的进程，列表中的时间表示该进程最后一次进入 Top5 的时间。

-   只有进入 Top5 的进程才会采集进程的 CPU 使用率、内存使用率和打开文件数，所以如果该进程在查询的时间范围内未持续进入 Top5，会出现监控图中数据点不连续的情况，数据点的密集程度则表明了该进程在服务器上的活跃程度。

    -   如下图所示的 wrapper 进程，未持续进入服务器 CPU 消耗最高的 Top5 进程，所以监控图中的数据点稀疏、不连续，有数据点的时间表示该进程在Top5内。

        ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/6151/3354_zh-CN.png)

    -   如下图所示的 java 进程，在监控图中数据点非常密集、连续，表明该进程持续排入 CPU 消耗最高的 Top5 进程内。

        ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/6151/3356_zh-CN.png)


## 监控指定进程数 {#section_xdd_t2d_xdb .section}

您可以通过进程数监控，采集关键进程的数量，及时获取关键进程的存活状态。

-   添加指定进程监控

    示例

    机器当前运行如下几个进程 `/usr/bin/java -Xmx2300m -Xms2300m org.apache.catalina.startup.Bootstrap` `/usr/bin/ruby` `nginx -c /ect/nginx/nginx.conf` 假设用户配置了6个关键字，则采集结果分别如下： 配置关键字为：`ruby`，采集进程数：1，命中进程名称。 配置关键字为：`nginx`，采集进程数：1，命中进程名称与参数。 配置关键字为：`/usr/bin`，采集进程数：2，命中路径\(两个进程包含这个路径\)。 配置关键字为：`apache.catalina`，采集进程数：1，命中部分参数。 配置关键字为：`nginx.conf`，采集进程数：1，命中部分参数。 配置关键字为：`-c`，采集进程数：1, 命中部分参数


**操作步骤**

1.  登录[云监控控制台](https://cms.console.aliyun.com/#/hostmonitor/host)。
2.  点击左侧菜单的**主机监控**。
3.  点击需要添加监控的机器名称或点击操作中的**监控图表**，进入机器的监控详情页。
4.  点击页面上方的**进程监控**，进入进程监控页面。
5.  鼠标放置在进程数监控图表时，点击**添加进程监控** 按钮，增加需要监控的进程。

-   删除指定进程监控
    1.  登录[云监控控制台](https://cms.console.aliyun.com/#/hostmonitor/host)。
    2.  点击左侧菜单的**主机监控**。
    3.  点击需要添加监控的机器名称或点击操作中的**监控图表**，进入机器的监控详情页。
    4.  点击页面上方的**进程监控**，进入进程监控页面。
    5.  鼠标放置在进程数监控图表时，点击**添加进程监控** 按钮，进入已添加的进程列表页。
    6.  在列表中点击**删除**来删除对应进程即可。

-   设置报警规则

    您在配置好指定进程的监控后，可以为进程配置报警规则，在进程数变化时收到报警通知。

    1.  登录[云监控控制台](https://cms.console.aliyun.com/#/hostmonitor/host)。
    2.  点击左侧菜单的**主机监控**。
    3.  选择需要添加进程监控的报警的机器，点击操作中的**报警规则**，进入报警规则页面。
    4.  点击页面上方的**新建报警规则**，进入报警规则创建页面。
    5.  在规则描述中选择**进程数**，然后配置相应的报警阈值。如果机器上配置了多个进程，每个进程数量不一样，可以点击**添加报警规则**一次为多个进程配置报警。
    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/6151/3367_zh-CN.png)


