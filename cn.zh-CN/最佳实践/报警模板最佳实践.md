# 报警模板最佳实践 {#concept_znd_wpq_zdb .concept}

## 目的 {#section_fwb_cqq_zdb .section}

当您的云账号下拥有很多服务器和云产品的资源时，怎样才能快速的为这些资源创建报警规则，在报警规则不合理时修改报警规则？本文将通过一个具体案例讲解大企业用户如何使用应用分组和报警模板功能，管理好各个业务使用的云资源的报警规则。

## 通过报警模板提升配置报警规则的效率 {#section_s35_kqq_zdb .section}

-   报警规则配置在应用分组和配置在单实例上的区别：
    -   创建报警规则时资源范围可以选择“实例”或者“应用分组”，如果选择“应用分组”，那么报警规则的作用范围就是整个应用分组内的所有资源。您的业务需要扩容或者缩容时，只需要将相应资源移入或移出应用分组，而不需要增加或删除报警规则。如果需要修改报警规则，也只需要修改这一条报警规则，就会在组内所有实例上生效。
    -   如果您选择将报警规则创建在实例上，那么该规则只对单一实例有效。修改报警规则时也只对单一实例生效。当实例增多时报警规则会变得难以管理。
-   报警模板如何提升配置规则的效率？
    -   ECS、RDS、SLB等基础服务在配置报警时，监控项和报警阈值相对固定，为这些需要报警的指标建立模板后，新增业务时，创建好应用分组后直接将模板应用在分组上，即可一键创建报警规则。
    -   当您需要批量新增、修改、删除报警规则时，也可以修改模板后，将模板统一应用在分组上，极大的节省操作时间。

## 实战案例 {#section_gwb_cqq_zdb .section}

当您的账号下服务器和其他云产品实例非常多时，首先建议您按照业务视角为资源创建不同的应用分组，然后通过应用分组来批量管理资源。

下面我们以一个常见的电商网站后台业务为例，介绍如何创建应用分组和使用报警模板，快速将业务的云上监控报警体系搭建起来。

## 操作步骤 {#section_kwb_cqq_zdb .section}

1.  首先，我们创建一个名为“电商后台模块报警模板”的报警模板。
    1.  登录[云监控控制台](https://cloudmonitor.console.aliyun.com)。
    2.  单击左侧导航栏中**报警服务**下的**报警模板**，进入报警模板页面。
    3.  单击右上角的**创建报警模板**按钮，进入创建报警模板页面。
    4.  配置模板基本信息：输入模板名称和描述。
    5.  配置报警策略：选择产品类型，添加并设置报警规则，将业务模块需要的报警策略添加到报警模板中。

        ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/6235/15440600265169_zh-CN.png)

    6.  点击**确认**按钮，保存报警模板配置。
2.  创建报警联系人和报警联系组。
    1.  登录[云监控控制台](https://cloudmonitor.console.aliyun.com)。
    2.  单击左侧导航栏中**报警服务**下的**报警联系人**，进入报警联系人管理页面。
    3.  单击右上角的**新建联系人**按钮，填写手机、邮箱等信息。添加手机和邮箱时需要对手机和邮件进行验证，防止您填写了错误的信息，无法及时收到报警通知。
    4.  在报警联系人管理页面，单击页面上方的**报警联系组**页签，切换到报警联系组列表。
    5.  单击右上角的**新建联系组**，弹出新建联系组页面。
    6.  填写组名并选择需要加入组中的联系人即可。
3.  创建一个名为“库存管理线上环境”的应用分组，并选择刚才创建的报警模板。
    1.  登录[云监控控制台](https://cloudmonitor.console.aliyun.com)。
    2.  单击左侧导航栏中的**应用分组**，进入应用分组页面。
    3.  单击右上角的**创建组**按钮，进入创建应用分组页面。
    4.  配置基本信息：输入应用分组名称，选择联系人组。联系人组即报警联系组，用于接收报警通知。

        ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/6235/15440600265163_zh-CN.jpg)

    5.  配置监控报警：选择报警模板（用于对组内的实例初始化报警规则）和报警级别。启用初始化安装监控插件，即在新生成ECS 实例后，会对实例安装云监控插件，以便采集监控数据。
    6.  配置动态添加实例：库存管理这块业务使用的云资源，我们以最常见的服务器+数据库+负载均衡资源组合为例。通过制定动态匹配规则添加云服务器ECS实例，支持根据ECS实例名称进行字段的“包含”、“前缀”、“后缀”匹配，符合匹配规则的实例会加入到应当前用分组（包含后续新创建的实例）。最多可以添加三条动态匹配规则，规则之间可以是“与”、“或”的关系。点击**添加产品**，可继续制定云数据库RDS版和负载均衡的动态匹配规则。
    7.  点击**创建应用分组**按钮，完成分组的创建。进入到该应用分组详情页，即可看到符合匹配规则的实例已添加到您所创建的应用分组内。

